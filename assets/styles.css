/* ============ Core tokens ============ */
:root{
  --bg:#0f172a;           /* header/nav 背景（濃紺） */
  --ink:#0b1220;          /* 本文文字色(濃) */
  --muted:#6b7280;        /* 補助文字 */
  --card:#ffffff;
  --line:#e5e7eb;
  --accent:#2563eb;       /* アクセント青 */
  --accent-weak:#dbeafe;

  /* サイドバー（出し入れ） */
  --sidebar-width:260px;
  --sidebar-hotzone:12px;
}
*{ box-sizing:border-box }
html,body{ height:100% }
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,Apple Color Emoji,Segoe UI Emoji;
  color:var(--ink);
  background:#f8fafc;
}

/* ============ Header ============ */
.site-header{
  display:flex; align-items:center; gap:.75rem;
  padding:.75rem 1rem; background:var(--bg); color:#fff;
  position:sticky; top:0; z-index:10;
}
.logo{ font-weight:700 }
.search{ flex:1; max-width:720px; padding:.6rem .8rem; border-radius:.5rem; border:1px solid #1f2937 }

/* ============ Layout（サイドバーはホバーで出現） ============ */
.layout{
  display:grid;
  grid-template-columns: 0 1fr;               /* 初期＝サイドバー非表示で右全幅 */
  gap:0; min-height:calc(100vh - 64px);
  transition:grid-template-columns .18s ease;
}
.sidebar{
  background:#111827; color:#e5e7eb; padding:1rem; border-right:1px solid #0b1220;
  position:sticky; top:56px; height:calc(100vh - 56px); overflow:auto;
  width:var(--sidebar-width);
  pointer-events:none; opacity:0; transition:opacity .12s linear;
}
.sidebar-open .layout{ grid-template-columns: var(--sidebar-width) 1fr; }
.sidebar-open .sidebar{ pointer-events:auto; opacity:1; }
.content{ padding:1.25rem 1.5rem }

/* 左端ホットゾーン（見えないがホバー可能） */
.edge-hotzone{
  position: fixed; inset: 56px auto 0 0;
  width: var(--sidebar-hotzone); z-index: 20; background: transparent;
}
.edge-hotzone:hover{ cursor: ew-resize; }

/* モバイルは1カラム固定 */
@media (max-width: 900px){
  .layout{ grid-template-columns: 1fr !important; }
  .sidebar{ position: fixed; left: 0; top: 56px; height: calc(100vh - 56px);
            box-shadow: 8px 0 24px rgba(0,0,0,.2); }
  .sidebar-open .layout{ grid-template-columns: 1fr !important; }
}

/* ============ メニュー ============ */
.menu{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:.5rem }
.menu-btn{
  width:100%; text-align:left; padding:.75rem .9rem; border:1px solid transparent; border-radius:.6rem;
  background:#1f2937; color:#e5e7eb; cursor:pointer;
}
.menu-btn:hover{ background:#243041 }
.menu-btn.active{ background:var(--accent); color:#fff; box-shadow:0 0 0 1px rgba(255,255,255,.15) inset }

.menu-item { display:block }
.submenu{
  list-style:none; margin:.4rem 0 1rem 0; padding:0 .25rem 0 .25rem; border-left:2px solid #374151;
}
.submenu li { margin:.25rem 0 }
.submenu-link{
  display:block; padding:.5rem .6rem .5rem .75rem; border-radius:.45rem; text-decoration:none; color:#e5e7eb;
}
.submenu-link:hover{ background:#243041; color:#fff }
.submenu-link.is-current{ background:#243041; color:#fff }

/* ============ 共通 ============ */
.section-title{ margin:.25rem 0 .25rem; font-size:1.25rem }
.section-desc{ color:var(--muted); margin:0 0 1rem }
.breadcrumb{ font-size:.9rem; color:var(--muted); margin:0 0 1rem }
.page-title{ margin:.2rem 0 .75rem }
.kicker{ font-size:.85rem; color:var(--muted) }
.site-footer{ color:var(--muted); font-size:.9rem; text-align:center; padding:1rem 0 2rem }

/* ============ TOP ランディング ============ */
.hero{
  background: linear-gradient(180deg, rgba(15,23,42,.75), rgba(15,23,42,.65)), url('../assets/sample-step.png') center/cover no-repeat;
  border-radius: 1rem; height: 190px; display:flex; align-items:center; justify-content:center; margin-bottom: 1.2rem;
}
.hero-search{
  display:flex; gap:.5rem; background:#fff; border-radius:999px; padding:.5rem; width:min(820px,95%);
  box-shadow: 0 6px 20px rgba(0,0,0,.12);
}
.hero-search input{ flex:1; border:0; outline:none; font-size:1rem; padding:.6rem 1rem; border-radius:999px; }
.btn-filter{ border:1px solid var(--line); border-radius:999px; padding:.6rem 1rem; background:#f3f4f6; cursor:pointer; }
.btn-filter:hover{ background:#e5e7eb }

.home-section{ margin-top: 1.2rem }
.home-h2{ font-size:1rem; margin:.25rem 0 .6rem; color:#111827 }

/* 新着記事 */
.article-list{ list-style:none; margin:0; padding:0; display:flex; flex-direction:column; gap:.7rem }
.article-item a{
  display:flex; gap:.9rem; align-items:center; padding:.8rem 1rem; background:#fff;
  border:1px solid var(--line); border-radius:.75rem; text-decoration:none; color:inherit;
}
.article-item a:hover{ border-color:var(--accent) }
.thumb{ width:44px; height:44px; border-radius:999px; background:#e5e7eb; border:1px solid var(--line) }
.meta .title{ font-weight:600 }
.meta .sub{ color:var(--muted); font-size:.9rem }

/* 人気記事 */
.popular-grid{ display:grid; grid-template-columns: repeat(auto-fill, minmax(260px,1fr)); gap:14px; margin-top:.5rem }
.pop-card{ background:#fff; border:1px solid var(--line); border-radius:.75rem; padding:.5rem .5rem .2rem }
.pop-head{ background:#f3f4f6; border-radius:.5rem; padding:.5rem .7rem; margin:.4rem }
.pop-tag{ font-weight:600; color:#374151 }
.pop-ol{ margin:.2rem .9rem .6rem 1.4rem; padding:0 }
.pop-ol li{ margin:.3rem 0 }
.pop-ol a{ text-decoration:none; color:inherit }
.pop-ol a:hover{ text-decoration:underline }
.rank{ display:inline-block; width:1.2rem }

/* ============ 検索結果（カード） ============ */
#search-results{ margin-top:1.25rem }
.result-head{ display:flex; align-items:center; justify-content:space-between; margin:.3rem 0 .8rem }
.btn-clear{ border:1px solid var(--line); border-radius:.55rem; padding:.45rem .8rem; background:#fff; cursor:pointer }
.btn-clear:hover{ background:#f3f4f6 }
.result-grid{ display:grid; gap:12px; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)) }
.result-card{
  display:block; padding:1rem 1.1rem; text-decoration:none; color:inherit;
  background:#fff; border:1px solid var(--line); border-radius:.9rem; box-shadow:0 2px 10px rgba(0,0,0,.04);
  transition: box-shadow .15s ease, transform .05s ease, border-color .15s ease;
}
.result-card:hover{ border-color: var(--accent); box-shadow:0 6px 22px rgba(0,0,0,.08); transform: translateY(-1px) }
.result-title{ font-weight:700; line-height:1.5 }
.result-empty{ grid-column:1 / -1; color:var(--muted); background:#fff; border:1px dashed var(--line); border-radius:.8rem; padding:1rem 1.1rem; text-align:center }

/* ============ 旧 .step（保守） ============ */
.step{
  display:grid; grid-template-columns:160px 1fr; gap:1rem; align-items:start;
  background:var(--card); border:1px solid var(--line); border-radius:1rem; padding:1rem; margin:0 0 1rem;
}
.step-num{
  display:flex; align-items:center; justify-content:center; width:120px; height:120px;
  border-radius:.75rem; border:1px dashed var(--line); font-weight:700; font-size:1.25rem; background:#f9fafb;
}
.step figure{ margin:0 } .step img{ width:100%; height:auto; border:1px solid var(--line); border-radius:.5rem }
.step-content h3{ margin:.1rem 0 .4rem } .step-content p{ margin:.3rem 0 .6rem; line-height:1.7 }

/* ============ Guide（独立スコープ） ============ */
.guide{ padding-top:.75rem }
.guide .page-title{ margin:.2rem 0 .8rem } .guide .page-lead{ margin-bottom:1.2rem }
.guide-steps{ display:flex; flex-direction:column; gap:14px }
.guide-step{
  display:grid; grid-template-columns:260px 1fr; gap:18px; align-items:start;
  background:var(--card); border:1px solid var(--line); border-radius:12px; padding:16px; position:relative;
}
.guide-left{ position:relative; padding-left:8px }
.guide-bullet{
  width:36px; height:36px; border-radius:999px; background:#fff; border:2px solid var(--accent); color:var(--accent);
  display:flex; align-items:center; justify-content:center; font-weight:700; box-shadow:0 1px 0 rgba(0,0,0,.04)
}
.guide-figure{ margin:8px 0 0 0 }
.guide-figure img{ width:100%; max-width:100%; max-height:320px; object-fit:contain; background:#f8fafc; border:1px solid var(--line); border-radius:8px }
.guide-cap{ margin-top:6px; color:var(--muted) }
.guide-right h3{ margin:.1rem 0 .35rem } .guide-right p{ margin:.25rem 0 .5rem; line-height:1.8 }

/* ============ Manual（手順ページ） ============ */
.manual{ max-width:1200px; margin:0 auto; padding:1rem 1.25rem 2.25rem }
.manual .page-title{ margin:.2rem 0 .9rem }

/* ステップ一覧 */
.manual-steps{ display:flex; flex-direction:column; gap:18px }

/* ステップカード */
.manual-step{
  display:grid; grid-template-columns:360px 1fr; gap:22px;
  background:#fff; border:1px solid #e6e8ef; border-radius:14px; padding:18px;
  box-shadow:0 4px 18px rgba(16,24,40,.06); position:relative;
}

/* 左：番号＋画像（タイムライン無し） */
.manual-left{ position:relative }
.manual-num{
  width:38px; height:38px; border-radius:999px; background:#fff;
  border:2px solid var(--accent); color:var(--accent); font-weight:700;
  display:flex; align-items:center; justify-content:center; box-shadow:0 1px 0 rgba(0,0,0,.04);
  margin-bottom:10px;
}

/* 画像：統一サイズ＆拡大可能 */
.manual-figure{ margin:0 }
.manual-figure img{
  display:block; width:100%; height:280px;   /* ← 最終サイズ */
  object-fit:contain; background:#f8fafc; border:1px solid var(--line); border-radius:10px;
  cursor:zoom-in; transition: transform .2s ease;
}
.manual-figure img:hover{ transform: scale(1.02) }
.manual-cap{ display:none }

/* 右：縦境界線＋文字組み */
.manual-right{
  border-left:2px solid #e5e7eb; padding-left:24px;
  display:flex; flex-direction:column; gap:.55rem;
}
.manual-right h3{ margin:0; font-size:1.18rem; line-height:1.5; font-weight:700; }
.manual-right .manual-desc{ margin:0; color:var(--muted); font-size:.98rem; line-height:1.85 }

/* 概要（白背景・目次風） */
.summary-box{
  border:1px solid #e5e7eb; border-radius:12px;
  padding:12px 14px 14px; margin:0 0 18px; background:#fff;
}
.summary-head{
  display:inline-block; background: var(--accent); color:#fff; font-weight:700; font-size:.9rem;
  padding:.35rem .8rem; border-radius:999px; letter-spacing:.02em;
}
.summary-body{ margin-top:.6rem; line-height:1.9 }

/* ===== ルール/注意（濃紺枠＋⚠️タブ） ===== */
.rule-box{
  background:#fff;
  border:2px solid var(--bg);
  border-radius:12px;
  padding:14px;
  position:relative;
}

/* ラベルタブ */
.rule-box .rule-label{
  position:absolute;
  left:14px;
  top:-14px;
  display:flex;
  align-items:center;
  gap:.45rem;
  background: var(--bg);
  color:#fff;
  font-weight:800;
  font-size:.88rem;
  border-radius:.5rem;
  padding:.35rem .75rem;
  line-height:1;
  box-shadow:0 2px 6px rgba(0,0,0,.12);
}

/* Web画像アイコン */
.rule-box .ico-img{
  width:18px;              /* サイズ調整 */
  height:18px;
  object-fit:contain;
  display:inline-block;
  vertical-align:middle;
  margin-right:2px;
  filter: drop-shadow(0 1px 1px rgba(0,0,0,.15));
}

.rule-box .rule-body{
  line-height:1.9;
}


/* Lightbox（拡大表示） */
.lightbox{
  position: fixed; inset: 0; background: rgba(0, 0, 0, 0.75);
  display:flex; justify-content:center; align-items:center;
  z-index: 999; opacity:0; pointer-events:none; transition: opacity .2s ease;
}
.lightbox.show{ opacity:1; pointer-events:auto }
.lightbox img{
  max-width: 90vw; max-height: 90vh; border-radius: 8px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.3); background:#fff;
}

/* ============ Responsive ============ */
@media (max-width: 1100px){
  .manual-step{ grid-template-columns:320px 1fr }
}
@media (max-width: 900px){
  .manual-step{ grid-template-columns:1fr }
  .manual-right{ border-left:0; padding-left:0 }
  .hero{ height:150px }
  .hero-search{ width:96% }
  .result-grid{ grid-template-columns:1fr }
}
